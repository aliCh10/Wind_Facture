<div class="bg" style="background-color: aliceblue;">
  <div class="d-flex h-100 justify-content-center align-items-center py-3">
    <div class="mx-auto app-login-box col-md-8">
      <!-- Card Container -->
      <div class="modal-dialog w-100">
        <div class="modal-content shadow-lg rounded-lg bg-white p-5"
        style="border-radius: 20px; box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.1);">
          <div class="modal-body text-center">
            <h4 class="font-weight-bold mb-2"
            style="font-size: 2rem; color: #2c3e50; font-family: 'cursive', sans-serif;">
          Bienvenue à
        </h4>
        
            <!-- Image Responsive -->
            <img src="assets/images/LOGO-svg.webp" alt="Logo" style="max-width: 80%; height: auto; margin-left: 18rem; ">

            <!-- Stepper -->
            <mat-horizontal-stepper [linear]="true" #stepper>
              <!-- Step 1: Personal Information -->
              <mat-step [stepControl]="personalInfo">
                <ng-template matStepLabel>
                  <span class="step-label">Étape 1 : Informations personnelles</span>
                </ng-template>

                <form [formGroup]="personalInfo"> 
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <mat-form-field  class="w-100">
                        <mat-label>Prénom</mat-label>
                        <input matInput placeholder="Prénom" formControlName="name">
                        <mat-icon matSuffix>person</mat-icon>
                        <mat-error *ngIf="personalInfo.get('name')?.invalid">
                          Le prénom est requis
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-6 mb-3">
                      <mat-form-field  class="w-100">
                        <mat-label>Nom de famille</mat-label>
                        <input matInput placeholder="Nom de famille" formControlName="secondName">
                        <mat-icon matSuffix>person_outline</mat-icon>
                        <mat-error *ngIf="personalInfo.get('secondName')?.invalid">
                          Le nom de famille est requis
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                  <!-- Email -->
                  <div class="mb-3">
                    <mat-form-field  class="w-100">
                      <mat-label>Adresse e-mail</mat-label>
                      <input matInput type="email" placeholder="Adresse e-mail" formControlName="email">
                      <mat-icon matSuffix>email</mat-icon>
                      <mat-error *ngIf="personalInfo.get('email')?.invalid">
                        L'adresse e-mail est invalide
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <!-- Phone -->
                  <div class="mb-3">
                    <mat-form-field  class="w-100">
                      <mat-label>Numéro de téléphone</mat-label>
                      <input matInput type="tel" placeholder="Numéro de téléphone" formControlName="tel">
                      <mat-icon matSuffix>phone</mat-icon>
                      <mat-error *ngIf="personalInfo.get('tel')?.invalid">
                        Le numéro de téléphone est invalide
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <!-- Password -->
                  <div class="mb-3">
                    <mat-form-field  class="w-100">
                      <mat-label>Mot de passe</mat-label>
                      <input matInput type="password" placeholder="Mot de passe" formControlName="password">
                      <mat-icon matSuffix>lock</mat-icon>
                      <mat-error *ngIf="personalInfo.get('password')?.invalid">
                        Le mot de passe doit comporter au moins 8 caractères et contenir au moins une lettre majuscule, une lettre minuscule et un caractère special
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <!-- Next Button -->
                <!-- Dans la partie du bouton Suivant (remplacez le code existant) -->
<div class="text-center mt-4">
  <button mat-raised-button 
          color="primary" 
          (click)="stepper.next()" 
          [disabled]="personalInfo.invalid"
          [class.disabled-button]="personalInfo.invalid"
          [class.enabled-button]="personalInfo.valid"
          class="w-100 py-2 transition-all">
    Suivant
  </button>
</div>

                  <p class="mt-4 text-center">
                    Vous avez déjà un compte ?
                    <a routerLink="/signin" style="color: #2c3e50; font-weight: bold; text-decoration: none;">
                      Connectez-vous ici
                    </a>
                  </p>

                </form>
              </mat-step>

              <!-- Step 2: Company Information -->
              <mat-step [stepControl]="companyInfo">
                <ng-template matStepLabel>
                  <span class="step-label">Étape 2 : Informations sur l'entreprise</span>
                </ng-template>

                <form [formGroup]="companyInfo">
                  <!-- Company Name -->
                  <div class="mb-3">
                    <mat-form-field  class="w-100">
                      <mat-label>Nom de l'entreprise</mat-label>
                      <input matInput placeholder="Nom de l'entreprise" formControlName="companyName">
                      <mat-icon matSuffix>business</mat-icon>
                      <mat-error *ngIf="companyInfo.get('companyName')?.invalid">
                        Le nom de l'entreprise est requis
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <!-- Company Address -->
                  <div class="mb-3">
                    <mat-form-field  class="w-100">
                      <mat-label>Adresse de l'entreprise</mat-label>
                      <input matInput placeholder="Adresse de l'entreprise" formControlName="address">
                      <mat-icon matSuffix>location_on</mat-icon>
                      <mat-error *ngIf="companyInfo.get('address')?.invalid">
                        L'adresse de l'entreprise est requise
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <!-- Company Type -->
                  <div class="mb-3">
                    <mat-form-field  class="w-100">
                      <mat-label>Type d'entreprise</mat-label>
                      <mat-select formControlName="companytype">
                        <mat-option value="SARL">SARL</mat-option>
                        <mat-option value="SAS">SAS</mat-option>
                        <mat-option value="EIRL">EIRL</mat-option>
                      </mat-select>
                      <mat-icon matSuffix>work</mat-icon>
                      <mat-error *ngIf="companyInfo.get('companytype')?.invalid">
                        Le type d'entreprise est requis
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <!-- Logo Upload -->
                  <div class="mb-3">
                    <div class="file-input-container">
                      <label class="file-input-label">
                        <span>Logo de l'entreprise</span>
                        <input type="file" (change)="onFileChange($event)" formControlName="logo" class="file-input">
                        <mat-icon class="file-input-icon">image</mat-icon>
                      </label>
                      <mat-error *ngIf="companyInfo.get('logo')?.invalid">
                        Le logo de l'entreprise est requis
                      </mat-error>
                    </div>
                  </div>

                  <!-- Previous and Submit Buttons -->
                  <div class="d-flex justify-content-between mt-4">
                    <button mat-raised-button color="basic" (click)="stepper.previous()"
                            class="w-45 py-2" style="background: linear-gradient(180deg, #2c3e50, #34495e);color:#FFD700">
                      Précédent
                    </button>
                    <button mat-raised-button color="primary" type="submit" [disabled]="companyInfo.invalid"
                            class="w-45 py-2" style="background: linear-gradient(180deg, #2c3e50, #34495e);color: #FFD700;" (click)="onSubmit()">
                      Créer un compte
                    </button>
                  </div>
                </form>
              </mat-step>
            </mat-horizontal-stepper>

            <!-- Error Message -->
            <div *ngIf="errorMessage" class="alert alert-danger mt-3">
              Une erreur s'est produite. Veuillez réessayer.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>